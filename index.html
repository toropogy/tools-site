<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ãƒ„ãƒ¼ãƒ«ã¾ã¨ã‚ã‚µã‚¤ãƒˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>ãƒ„ãƒ¼ãƒ«ã¾ã¨ã‚ã‚µã‚¤ãƒˆ</h1>

  <!-- ğŸ”¸ ã‚¿ã‚°æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ -->
  <div id="tag-bar" class="tag-scroll"></div>

  <!-- ğŸ”¹ ãƒ„ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ä¸€è¦§ -->
  <section id="tool-list" class="grid"></section>

  <script>
    fetch('tools.json')
      .then(res => res.json())
      .then(tools => {
        const tagBar = document.getElementById('tag-bar');
        const list = document.getElementById('tool-list');

        // ğŸ” ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚¿ã‚°ã‚’æŠ½å‡º
        const tags = Array.from(new Set(tools.flatMap(t => t.tags)));
        let activeTag = 'all';

        // ğŸ”– ã€Œã™ã¹ã¦ã€ãƒœã‚¿ãƒ³
        const allBtn = document.createElement('button');
        allBtn.textContent = 'ã™ã¹ã¦';
        allBtn.dataset.tag = 'all';
        allBtn.className = 'tag active';
        tagBar.appendChild(allBtn);

        // ğŸ”– ã‚¿ã‚°ãƒœã‚¿ãƒ³ã‚’ç”Ÿæˆ
        tags.forEach(tag => {
          const btn = document.createElement('button');
          btn.textContent = tag;
          btn.dataset.tag = tag;
          btn.className = 'tag';
          tagBar.appendChild(btn);
        });

        // ğŸ§± ãƒ„ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ã®æç”»
        function renderCards(filterTag) {
          list.innerHTML = '';
          tools
            .filter(t => filterTag === 'all' || t.tags.includes(filterTag))
            .forEach(tool => {
              const card = document.createElement('a');
              card.className = 'card';
              card.href = tool.url;
              card.target = '_blank';
              card.innerHTML = `
                <strong>${tool.name}</strong><br />
                <small>${tool.tags.join(', ')}</small>
              `;
              list.appendChild(card);
            });
        }

        renderCards('all');

        // ğŸ¯ ã‚¿ã‚°ã‚¯ãƒªãƒƒã‚¯ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åˆ‡æ›¿
        tagBar.addEventListener('click', (e) => {
          if (!e.target.dataset.tag) return;
          const selected = e.target.dataset.tag;
          document.querySelectorAll('.tag').forEach(btn =>
            btn.classList.toggle('active', btn.dataset.tag === selected)
          );
          renderCards(selected);
        });
      });
  </script>
</body>
</html>

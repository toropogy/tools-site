<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>„ÉÑ„Éº„É´„Åæ„Å®„ÇÅ„Çµ„Ç§„Éà</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <script src="common.js" defer></script>
</head>
<body>
  <!-- üîπ „Éò„ÉÉ„ÉÄ„Éº„ÅØ common.js ÁµåÁî±„ÅßÂ∑Æ„ÅóËæº„Åø -->

  <!-- üî∏ „Çø„Ç∞„Éê„Éº -->
  <div id="tag-bar" class="tag-scroll"></div>

  <!-- üî∏ „ÉÑ„Éº„É´„Ç´„Éº„Éâ‰∏ÄË¶ß -->
  <section id="tool-list" class="grid"></section>

  <script>
    fetch('tools.json')
      .then(res => res.json())
      .then(tools => {
        const tagBar = document.getElementById('tag-bar');
        const list = document.getElementById('tool-list');

        const tags = Array.from(new Set(tools.flatMap(t => t.tags)));

        const allBtn = document.createElement('button');
        allBtn.textContent = '„Åô„Åπ„Å¶';
        allBtn.dataset.tag = 'all';
        allBtn.className = 'tag active';
        tagBar.appendChild(allBtn);

        tags.forEach(tag => {
          const btn = document.createElement('button');
          btn.textContent = tag;
          btn.dataset.tag = tag;
          btn.className = 'tag';
          tagBar.appendChild(btn);
        });

        function renderCards(filterTag) {
          list.innerHTML = '';
          tools
            .filter(t => filterTag === 'all' || t.tags.includes(filterTag))
            .forEach(tool => {
              const card = document.createElement('a');
              card.className = 'card';
              card.href = tool.url;
              card.target = '_blank';
              card.innerHTML = `
                <strong>${tool.name}</strong>
                <p class="tags">${tool.tags.join(', ')}</p>
              `;
              list.appendChild(card);
            });
        }

        renderCards('all');

        tagBar.addEventListener('click', e => {
          if (!e.target.dataset.tag) return;
          const sel = e.target.dataset.tag;
          document.querySelectorAll('.tag').forEach(b =>
            b.classList.toggle('active', b.dataset.tag === sel)
          );
          renderCards(sel);
        });
      });
  </script>

  <!-- üîπ „Éï„ÉÉ„Çø„Éº„ÇÇ common.js ÁµåÁî±„ÅßÂ∑Æ„ÅóËæº„Åø -->
</body>
</html>
